function Maze(t){this.vue=t,this.create()}Maze.prototype={create:function(){this.map=[],this.openTiles=[],this.vue.maze.tiles=[],this.vue.maze.position=[0,0],this.vue.maze.finish=null,this.vue.maze.rotation=0,this.vue.$el.focus();var t,e=this;(t=this.addTile([0,0])).start=!0,this.interval&&clearInterval(this.interval),this.interval=setInterval(function(){if(e.openTiles.length){var i=Math.floor(Math.random()*e.openTiles.length/2);if(e.getTile(e.openTiles[i][0],e.openTiles[i][1]))return e.openTiles.splice(i,1),!1;t=e.addTile(e.openTiles[i]),e.openTiles.splice(i,1)}(!e.openTiles.length||e.vue.maze.tiles.length>=e.vue.options.maxTiles)&&(clearInterval(e.interval),t.finish=!0,e.vue.maze.finish=t.position,e.closeOpenTiles(),console.log("Finished the maze with "+e.vue.maze.tiles.length+" tiles."))},0)},closeOpenTiles:function(){for(var t=["top","right","bottom","left"],e=t.slice(t.length/2).concat(t.slice(0,t.length/2)),i=0;i<this.openTiles.length;i++)if(!this.getTile(this.openTiles[i][0],this.openTiles[i][1]))for(var s={top:this.getTile(this.openTiles[i][0],this.openTiles[i][1]-1),right:this.getTile(this.openTiles[i][0]+1,this.openTiles[i][1]),bottom:this.getTile(this.openTiles[i][0],this.openTiles[i][1]+1),left:this.getTile(this.openTiles[i][0]-1,this.openTiles[i][1])},o=0;o<t.length;o++)s[t[o]]&&s[t[o]][e[o]]&&(s[t[o]][e[o]]=!1)},addTile:function(t){var e=t[0],i=t[1],s={position:[e,i],top:!1,right:!1,bottom:!1,left:!1,start:!1,finish:!1};void 0===this.map[e]&&(this.map[e]=[]),this.map[e][i]=s;var o={t:{top:this.getTile(e,i-1),right:this.getTile(e+1,i),bottom:this.getTile(e,i+1),left:this.getTile(e-1,i)},r:{top:!1,right:!1,bottom:!1,left:!1}};if(this.vue.options.bundled){var h=Math.sqrt(this.vue.maze.tiles.length)/1.5;if(o.d=[],Math.abs(e)<Math.abs(i))var l=[0,2],n=[1,3];else l=[1,3],n=[0,2];e<-h?o.d[l[0]]="right":e>h?o.d[l[0]]="left":Math.round(Math.random())?o.d[l[0]]="right":o.d[l[0]]="left",i<-h?o.d[n[0]]="bottom":i>h?o.d[n[0]]="top":Math.round(Math.random())?o.d[n[0]]="bottom":o.d[n[0]]="top",o.d[l[1]]="right"==o.d[l[0]]?"left":"right",o.d[n[1]]="bottom"==o.d[n[0]]?"top":"bottom",o.o=o.d.slice(2).concat(o.d.slice(0,2))}else{var a=["top","right","bottom","left"],r=a.slice(a.length/2).concat(a.slice(0,a.length/2)),p=Math.round(Math.random()*a.length);o.d=a.slice(p).concat(a.slice(0,p)),o.o=r.slice(p).concat(r.slice(0,p))}for(var c=0,T=0;T<o.d.length;T++)o.t[o.d[T]]&&(o.r[o.d[T]]=!0,o.t[o.d[T]][o.o[T]]&&(s[o.d[T]]=!0,c++));for(T=0;T<o.d.length;T++){if(!o.r[o.d[T]])(this.openTiles.length<4||Math.round(Math.random()*(6-2*c-T)/T))&&(s[o.d[T]]=!0,o.r[o.d[T]]=!0,c++)}return this.vue.maze.tiles.push(s),!o.t.top&&o.r.top&&this.openTiles.push([e,i-1]),!o.t.right&&o.r.right&&this.openTiles.push([e+1,i]),!o.t.bottom&&o.r.bottom&&this.openTiles.push([e,i+1]),!o.t.left&&o.r.left&&this.openTiles.push([e-1,i]),s},move:function(t){switch(t){case"up":this.moveTo(0,-1);break;case"right":this.moveTo(1,0);break;case"down":this.moveTo(0,1);break;case"left":this.moveTo(-1,0)}},moveTo:function(t,e){var i;switch(!0){case-1===t:i="right";break;case 1===t:i="left";break;case-1===e:i="bottom";break;case 1===e:i="top"}var s=this.vue.maze.position[0]+t,o=this.vue.maze.position[1]+e,h=this.getTile(s,o);h&&h[i]&&(this.vue.maze.position=[s,o])},getTile:function(t,e){return void 0!==this.map[t]&&(void 0!==this.map[t][e]&&this.map[t][e])}};